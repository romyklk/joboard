{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}
	| Mes candidatures
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div class="row">
			<div class="col-2 bg-dark text-white">
				{% include 'partials/_sidebar.html.twig' %}
			</div>
			<div class="col-10 bg-custom-account">
				{% block content %}
					<h2 class="text-center">Mes candidatures</h2>
					{% if applications|length == 0 %}
						<div class="alert alert-info">
							Aucune candidature n'a été trouvée.
						</div>
					{% else %}
						<h6 class="text-center">
							Vous avez postulé à
							{{ applications|length == 1 ? 'une offre' : applications|length ~ ' offres' }}.
						</h6>
						<div class="table-responsive">
							<table class="table table-striped table-hover table-bordered table-dark text-center">
								<thead>
									<tr>
										<th>Statut</th>
										<th>Offre</th>
										<th>Entreprise</th>
										<th>Contrat</th>
										<th>Localisation</th>
										<th>Date</th>
									</tr>
								</thead>
								<tbody>
									{% for application in applications %}
										<tr class="table-active">
											<td>
												{% if application.status == 'STATUS_ACCEPTED' %}
													<span class="badge text-bg-success">Acceptée</span>
												{% elseif application.status == 'STATUS_REFUSED' %}
													<span class="badge text-bg-danger">Refusée</span>
												{% else %}
													<span class="badge text-bg-info">En attente</span>
												{% endif %}
											</td>
											<td>
												<a href="{{ path('app_offre_emploi_show', {'id': application.offer.id,'slug':application.offer.slug}) }}" class="text-white text-decoration-none">
													{{ application.offer.title }}
												</a>
											</td>
											<td>{{ application.offer.entreprise.name }}</td>
											<td>{{ application.offer.contractType }}</td>
											<td>{{ application.offer.location }}</td>
											<td>{{ application.offer.createdAt|date('d/m/Y') }}</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					{% endif %}
				{% endblock %}
			</div>
		</div>
	</div>
{% endblock %}
